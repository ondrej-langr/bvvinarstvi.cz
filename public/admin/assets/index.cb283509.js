import{r as t,a as g,u as D,m as U,aH as G,aG as K,e as j,Q as k,a8 as A,aO as F,h as r,j as s,G as B,A as E,T as P,F as Q,ay as W,aP as q,p as b,ab as R,n as z,L as H,aQ as J,aR as V,O as X}from"./index.86015cc4.js";const Y=(a,h)=>{const i=t.exports.useCallback(()=>g.generalTranslations.getMany(a).then(({data:u})=>u.data),[a]),c=t.exports.useMemo(()=>["generalTranslations",a],[a]),n=D(c,i,{enabled:!!a,...h});return t.exports.useMemo(()=>({...n,key:c}),[n,c])},_=()=>{const{t:a}=U(),h=G(),i=K(),c=j(),{lang:n}=k(),u=A(),[f,{open:v,close:N}]=F(!1),[S,x]=t.exports.useState(!1),{data:o,isLoading:C,refetch:p}=Y(n,{refetchOnMount:!f,refetchOnWindowFocus:!f}),[l,w]=t.exports.useState(o),I=t.exports.useMemo(()=>Object.entries(l||{}).sort(([e],[d])=>e.localeCompare(d)),[l]),L=t.exports.useCallback(async(e,d)=>{w({...l||{},[e]:d})},[l]),y=async e=>{(o==null?void 0:o[e])!=l[e]&&(x(!0),await u({title:"Saving",message:a("Saving translation, please wait..."),successMessage:a("Key translated!")},async()=>{await g.generalTranslations.updateTranslation(e,l[e],n),await p(),x(!1),N()}))};t.exports.useEffect(()=>{w(o)},[o]),t.exports.useEffect(()=>{p()},[h]);const O=t.exports.useCallback(e=>async()=>{if(!!confirm(a("Do you really want to delete this key for ALL languages?")))try{u({title:"Deleting",message:a("Deleting selected key, please wait..."),successMessage:a("Key deleted!")},async()=>{await g.generalTranslations.deleteKey(e),await p()})}catch{}},[a,p]),T=r("tr",{children:[s("th",{children:a("Translation key")}),s("th",{className:"w-full max-w-[350px]",children:a("Translation value")}),s("th",{className:"w-full max-w-[100px] opacity-0",children:"Tools"})]}),M=I.map(([e,d])=>r("tr",{children:[s("td",{children:e}),s("td",{className:"w-full max-w-[350px]",children:s(B,{onFocus:v,onBlur:()=>y(e),onChange:m=>L(e,m.currentTarget.value),onKeyDown:m=>{m.key==="Enter"&&y(e)},value:d,placeholder:a("Translate by entering some keyword")})}),s("td",{className:"w-full max-w-[100px]",children:s(E,{onClick:O(e),color:"red",children:s(P,{})})})]},e));return r(Q,{children:[r(W,{position:"apart",mb:"md",mt:"md",children:[s(q,{label:"",value:n,disabledOptions:[i==null?void 0:i.i18n.default],onChange:e=>e&&c(b.settings.translations(e).list)}),s(R,{to:b.settings.translations(n).create,color:"green",leftIcon:s(z,{}),component:H,children:a("Add new")})]}),r("div",{className:"relative min-h-[400px]",children:[s(J,{visible:C||S,overlayBlur:2}),r(V,{className:"-mx-5",horizontalSpacing:"xl",verticalSpacing:"sm",children:[s("thead",{children:T}),s("tbody",{children:M}),s("tfoot",{children:T})]})]}),s(X,{})]})};export{_ as GeneralTranslationsSettings,_ as default};
